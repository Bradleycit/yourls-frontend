<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YOURLS - URL Shortener</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const { useState, useEffect } = React;

        // Simple SVG icon components
        const Link2 = () => (
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
            <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" />
            <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" />
          </svg>
        );

        const Copy = ({ size = 24 }) => (
          <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
            <rect x="9" y="9" width="13" height="13" rx="2" ry="2" />
            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1" />
          </svg>
        );

        const Check = ({ size = 24 }) => (
          <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
            <polyline points="20 6 9 17 4 12" />
          </svg>
        );

        const Settings = ({ size = 24 }) => (
          <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
            <circle cx="12" cy="12" r="3" />
            <path d="M12 1v6m0 6v6m9-9h-6m-6 0H3" />
          </svg>
        );

        const BarChart3 = ({ size = 24 }) => (
          <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
            <path d="M3 3v18h18" />
            <path d="M18 17V9M13 17V5M8 17v-3" />
          </svg>
        );

        const ExternalLink = ({ size = 24 }) => (
          <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
            <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6" />
            <polyline points="15 3 21 3 21 9" />
            <line x1="10" y1="14" x2="21" y2="3" />
          </svg>
        );

        const Trash2 = ({ size = 24 }) => (
          <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
            <polyline points="3 6 5 6 21 6" />
            <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" />
          </svg>
        );

        const QrCode = ({ size = 24 }) => (
          <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
            <rect x="3" y="3" width="7" height="7" />
            <rect x="14" y="3" width="7" height="7" />
            <rect x="14" y="14" width="7" height="7" />
            <rect x="3" y="14" width="7" height="7" />
          </svg>
        );

        const Download = ({ size = 24 }) => (
          <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
            <polyline points="7 10 12 15 17 10" />
            <line x1="12" y1="15" x2="12" y2="3" />
          </svg>
        );

        function YourlsFrontend() {
          const [config, setConfig] = useState({
            brandName: 'ShortLink',
            brandColor: '#3b82f6',
            apiUrl: 'https://your-yourls-instance.com/yourls-api.php',
            signature: 'your-signature-token'
          });
          
          const [url, setUrl] = useState('');
          const [keyword, setKeyword] = useState('');
          const [title, setTitle] = useState('');
          const [shortUrl, setShortUrl] = useState('');
          const [loading, setLoading] = useState(false);
          const [copied, setCopied] = useState(false);
          const [showSettings, setShowSettings] = useState(false);
          const [links, setLinks] = useState([]);
          const [activeTab, setActiveTab] = useState('shorten');
          const [showQR, setShowQR] = useState(null);
          const [qrSize, setQrSize] = useState(256);

          useEffect(() => {
            const saved = localStorage.getItem('yourls-config');
            if (saved) {
              setConfig(JSON.parse(saved));
            }
          }, []);

          const saveConfig = (newConfig) => {
            setConfig(newConfig);
            localStorage.setItem('yourls-config', JSON.stringify(newConfig));
          };

          const shortenUrl = async () => {
            if (!url) return;
            
            setLoading(true);
            try {
              const params = new URLSearchParams({
                signature: config.signature,
                action: 'shorturl',
                url: url,
                format: 'json',
                ...(keyword && { keyword }),
                ...(title && { title })
              });

              // Uncomment below for real YOURLS API
              /*
              const response = await fetch(`${config.apiUrl}?${params}`);
              const data = await response.json();
              if (data.status === 'success') {
                setShortUrl(data.shorturl);
                setLinks(prev => [{
                  shorturl: data.shorturl,
                  url: data.url.url,
                  title: data.title,
                  clicks: 0,
                  timestamp: new Date().toISOString()
                }, ...prev]);
              }
              setLoading(false);
              */

              // Mock response for demo (remove when using real API)
              setTimeout(() => {
                const mockShortUrl = `${config.apiUrl.split('/yourls-api')[0]}/${keyword || Math.random().toString(36).substr(2, 6)}`;
                setShortUrl(mockShortUrl);
                setLoading(false);
                
                setLinks(prev => [{
                  shorturl: mockShortUrl,
                  url: url,
                  title: title || url,
                  clicks: 0,
                  timestamp: new Date().toISOString()
                }, ...prev]);
                
                setUrl('');
                setKeyword('');
                setTitle('');
              }, 800);

            } catch (error) {
              console.error('Error shortening URL:', error);
              alert('Error shortening URL. Please check your API settings.');
              setLoading(false);
            }
          };

          const copyToClipboard = (text) => {
            navigator.clipboard.writeText(text);
            setCopied(true);
            setTimeout(() => setCopied(false), 2000);
          };

          const deleteLink = (shorturl) => {
            setLinks(prev => prev.filter(link => link.shorturl !== shorturl));
          };

          const generateQRCode = (url) => {
            return `https://api.qrserver.com/v1/create-qr-code/?size=${qrSize}x${qrSize}&data=${encodeURIComponent(url)}`;
          };

          const downloadQR = (url, filename) => {
            const qrUrl = generateQRCode(url);
            const link = document.createElement('a');
            link.href = qrUrl;
            link.download = `${filename || 'qrcode'}.png`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
          };

          return (
            <div className="min-h-screen bg-gradient-to-br from-slate-50 to-slate-100">
              {/* Header */}
              <header className="bg-white border-b border-slate-200">
                <div className="max-w-6xl mx-auto px-4 py-4 flex items-center justify-between">
                  <div className="flex items-center gap-3">
                    <div 
                      className="w-10 h-10 rounded-xl flex items-center justify-center text-white"
                      style={{ backgroundColor: config.brandColor }}
                    >
                      <Link2 />
                    </div>
                    <h1 className="text-2xl font-bold text-slate-800">{config.brandName}</h1>
                  </div>
                  
                  <button
                    onClick={() => setShowSettings(!showSettings)}
                    className="p-2 hover:bg-slate-100 rounded-lg transition-colors"
                  >
                    <Settings size={20} />
                  </button>
                </div>
              </header>

              <div className="max-w-6xl mx-auto px-4 py-8">
                {/* Settings Panel */}
                {showSettings && (
                  <div className="bg-white rounded-2xl shadow-lg p-6 mb-6 border border-slate-200">
                    <h2 className="text-xl font-semibold mb-4 text-slate-800">White Label Settings</h2>
                    <div className="grid gap-4">
                      <div>
                        <label className="block text-sm font-medium text-slate-700 mb-2">
                          Brand Name
                        </label>
                        <input
                          type="text"
                          value={config.brandName}
                          onChange={(e) => saveConfig({...config, brandName: e.target.value})}
                          className="w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                        />
                      </div>
                      
                      <div>
                        <label className="block text-sm font-medium text-slate-700 mb-2">
                          Brand Color
                        </label>
                        <div className="flex gap-2">
                          <input
                            type="color"
                            value={config.brandColor}
                            onChange={(e) => saveConfig({...config, brandColor: e.target.value})}
                            className="w-20 h-10 rounded-lg cursor-pointer"
                          />
                          <input
                            type="text"
                            value={config.brandColor}
                            onChange={(e) => saveConfig({...config, brandColor: e.target.value})}
                            className="flex-1 px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                          />
                        </div>
                      </div>
                      
                      <div>
                        <label className="block text-sm font-medium text-slate-700 mb-2">
                          YOURLS API URL
                        </label>
                        <input
                          type="text"
                          value={config.apiUrl}
                          onChange={(e) => saveConfig({...config, apiUrl: e.target.value})}
                          placeholder="https://your-domain.com/yourls-api.php"
                          className="w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                        />
                      </div>
                      
                      <div>
                        <label className="block text-sm font-medium text-slate-700 mb-2">
                          API Signature Token
                        </label>
                        <input
                          type="password"
                          value={config.signature}
                          onChange={(e) => saveConfig({...config, signature: e.target.value})}
                          placeholder="Your YOURLS signature token"
                          className="w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                        />
                      </div>
                    </div>
                  </div>
                )}

                {/* Tabs */}
                <div className="flex gap-2 mb-6">
                  <button
                    onClick={() => setActiveTab('shorten')}
                    className={`px-6 py-3 rounded-lg font-medium transition-all ${
                      activeTab === 'shorten'
                        ? 'bg-white text-slate-800 shadow-md'
                        : 'text-slate-600 hover:bg-white/50'
                    }`}
                  >
                    Shorten URL
                  </button>
                  <button
                    onClick={() => setActiveTab('links')}
                    className={`px-6 py-3 rounded-lg font-medium transition-all ${
                      activeTab === 'links'
                        ? 'bg-white text-slate-800 shadow-md'
                        : 'text-slate-600 hover:bg-white/50'
                    }`}
                  >
                    My Links ({links.length})
                  </button>
                </div>

                {/* Main Content */}
                {activeTab === 'shorten' ? (
                  <div className="bg-white rounded-2xl shadow-xl p-8 border border-slate-200">
                    <h2 className="text-3xl font-bold text-slate-800 mb-2">
                      Shorten your link
                    </h2>
                    <p className="text-slate-600 mb-8">
                      Create short, memorable links in seconds
                    </p>

                    <div className="space-y-4">
                      <div>
                        <label className="block text-sm font-medium text-slate-700 mb-2">
                          Long URL *
                        </label>
                        <input
                          type="url"
                          value={url}
                          onChange={(e) => setUrl(e.target.value)}
                          placeholder="https://example.com/very/long/url"
                          className="w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent text-lg"
                        />
                      </div>

                      <div className="grid md:grid-cols-2 gap-4">
                        <div>
                          <label className="block text-sm font-medium text-slate-700 mb-2">
                            Custom Keyword (optional)
                          </label>
                          <input
                            type="text"
                            value={keyword}
                            onChange={(e) => setKeyword(e.target.value)}
                            placeholder="my-link"
                            className="w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                          />
                        </div>

                        <div>
                          <label className="block text-sm font-medium text-slate-700 mb-2">
                            Title (optional)
                          </label>
                          <input
                            type="text"
                            value={title}
                            onChange={(e) => setTitle(e.target.value)}
                            placeholder="My Link Title"
                            className="w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                          />
                        </div>
                      </div>

                      <button
                        onClick={shortenUrl}
                        disabled={loading || !url}
                        className="w-full py-4 rounded-xl text-white font-semibold text-lg shadow-lg hover:shadow-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed"
                        style={{ backgroundColor: config.brandColor }}
                      >
                        {loading ? 'Shortening...' : 'Shorten URL'}
                      </button>
                    </div>

                    {shortUrl && (
                      <div className="mt-6 p-4 bg-green-50 border border-green-200 rounded-xl">
                        <p className="text-sm text-green-800 mb-2 font-medium">
                          Your shortened URL:
                        </p>
                        <div className="flex items-center gap-2 mb-3">
                          <input
                            type="text"
                            value={shortUrl}
                            readOnly
                            className="flex-1 px-4 py-2 bg-white border border-green-300 rounded-lg text-green-900 font-mono"
                          />
                          <button
                            onClick={() => copyToClipboard(shortUrl)}
                            className="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2"
                          >
                            {copied ? <Check size={18} /> : <Copy size={18} />}
                            <span>{copied ? 'Copied!' : 'Copy'}</span>
                          </button>
                          <button
                            onClick={() => setShowQR(shortUrl)}
                            className="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2"
                          >
                            <QrCode size={18} />
                            <span>QR</span>
                          </button>
                        </div>
                      </div>
                    )}
                  </div>
                ) : (
                  <div className="bg-white rounded-2xl shadow-xl p-8 border border-slate-200">
                    <h2 className="text-2xl font-bold text-slate-800 mb-6">
                      Your Shortened Links
                    </h2>

                    {links.length === 0 ? (
                      <div className="text-center py-12">
                        <div className="text-slate-300 mx-auto mb-4 flex justify-center">
                          <Link2 />
                        </div>
                        <p className="text-slate-600">No links yet. Create your first short link!</p>
                      </div>
                    ) : (
                      <div className="space-y-3">
                        {links.map((link, index) => (
                          <div
                            key={index}
                            className="p-4 border border-slate-200 rounded-xl hover:border-slate-300 transition-colors"
                          >
                            <div className="flex items-start justify-between gap-4">
                              <div className="flex-1 min-w-0">
                                <div className="flex items-center gap-2 mb-2">
                                  <a
                                    href={link.shorturl}
                                    target="_blank"
                                    rel="noopener noreferrer"
                                    className="font-mono font-semibold hover:underline flex items-center gap-1"
                                    style={{ color: config.brandColor }}
                                  >
                                    {link.shorturl.split('/').pop()}
                                    <ExternalLink size={14} />
                                  </a>
                                  <button
                                    onClick={() => copyToClipboard(link.shorturl)}
                                    className="p-1 hover:bg-slate-100 rounded transition-colors"
                                  >
                                    <Copy size={14} />
                                  </button>
                                </div>
                                <p className="text-sm text-slate-600 truncate mb-1">
                                  {link.title}
                                </p>
                                <p className="text-xs text-slate-400 truncate">
                                  {link.url}
                                </p>
                              </div>
                              
                              <div className="flex items-center gap-2">
                                <div className="text-right mr-2">
                                  <div className="flex items-center gap-1 text-slate-600">
                                    <BarChart3 size={14} />
                                    <span className="text-sm font-semibold">{link.clicks}</span>
                                  </div>
                                  <p className="text-xs text-slate-400">clicks</p>
                                </div>
                                <button
                                  onClick={() => setShowQR(link.shorturl)}
                                  className="p-2 hover:bg-blue-50 rounded-lg transition-colors"
                                  title="Generate QR Code"
                                >
                                  <QrCode size={16} />
                                </button>
                                <button
                                  onClick={() => deleteLink(link.shorturl)}
                                  className="p-2 hover:bg-red-50 rounded-lg transition-colors"
                                >
                                  <Trash2 size={16} />
                                </button>
                              </div>
                            </div>
                          </div>
                        ))}
                      </div>
                    )}
                  </div>
                )}
              </div>

              {/* QR Code Modal */}
              {showQR && (
                <div 
                  className="fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50"
                  onClick={() => setShowQR(null)}
                >
                  <div 
                    className="bg-white rounded-2xl p-8 max-w-md w-full shadow-2xl"
                    onClick={(e) => e.stopPropagation()}
                  >
                    <div className="flex items-center justify-between mb-6">
                      <h3 className="text-2xl font-bold text-slate-800">QR Code</h3>
                      <button
                        onClick={() => setShowQR(null)}
                        className="text-slate-400 hover:text-slate-600 text-2xl leading-none"
                      >
                        Ã—
                      </button>
                    </div>

                    <div className="bg-slate-50 rounded-xl p-6 mb-6 flex justify-center">
                      <img
                        src={generateQRCode(showQR)}
                        alt="QR Code"
                        className="w-64 h-64"
                      />
                    </div>

                    <div className="mb-4">
                      <label className="block text-sm font-medium text-slate-700 mb-2">
                        QR Code Size
                      </label>
                      <select
                        value={qrSize}
                        onChange={(e) => setQrSize(Number(e.target.value))}
                        className="w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                      >
                        <option value={128}>Small (128x128)</option>
                        <option value={256}>Medium (256x256)</option>
                        <option value={512}>Large (512x512)</option>
                        <option value={1024}>Extra Large (1024x1024)</option>
                      </select>
                    </div>

                    <div className="mb-4 p-3 bg-slate-50 rounded-lg">
                      <p className="text-sm text-slate-600 font-mono break-all">
                        {showQR}
                      </p>
                    </div>

                    <div className="flex gap-3">
                      <button
                        onClick={() => copyToClipboard(showQR)}
                        className="flex-1 px-4 py-3 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors flex items-center justify-center gap-2"
                      >
                        <Copy size={18} />
                        <span>Copy Link</span>
                      </button>
                      <button
                        onClick={() => downloadQR(showQR, showQR.split('/').pop())}
                        className="flex-1 px-4 py-3 text-white rounded-lg hover:opacity-90 transition-opacity flex items-center justify-center gap-2"
                        style={{ backgroundColor: config.brandColor }}
                      >
                        <Download size={18} />
                        <span>Download</span>
                      </button>
                    </div>
                  </div>
                </div>
              )}

              {/* Footer */}
              <footer className="text-center py-8 text-slate-500 text-sm">
                Powered by {config.brandName}
              </footer>
            </div>
          );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<YourlsFrontend />);
    </script>
</body>
</html>